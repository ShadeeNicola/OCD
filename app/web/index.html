<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OCD - One Click Deployer</title>
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/layout.css">
    <link rel="stylesheet" href="styles/landing.css">
    <link rel="stylesheet" href="styles/scaling.css">
    <link rel="stylesheet" href="styles/rn-creation.css">
    <link rel="stylesheet" href="styles/hf-adoption.css">
    <link rel="stylesheet" href="styles/settings.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-background">
        <div class="particles"></div>
        <div class="gradient-overlay"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                    <span>OCD</span>
                </div>
                <nav class="nav">
                    <a href="#landing" class="nav-link active" data-page="landing">Deploy</a>
                    <a href="#scaling" class="nav-link" data-page="scaling">Scaling</a>
                    <a href="#rn-creation" class="nav-link" data-page="rn-creation">RN Creation</a>
                    <a href="#automation-reports" class="nav-link" data-page="automation-reports">Automation Reports</a>
                    <a href="#hf-adoption" class="nav-link" data-page="hf-adoption">HF Adoption</a>
                    <a href="#settings" class="nav-link" data-page="settings">Settings</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Page Container -->
    <div class="page-container">
        <!-- Landing Page (Deploy, Progress, Output) -->
        <div class="page active" id="landing-page">
            <main class="main">
                <div class="container">
                    <!-- Hero Section -->
                    <section class="hero">
                        <div class="hero-content">
                            <h1 class="hero-title">One Click Deployer</h1>
                            <p class="hero-subtitle">Detect. Deploy. Deliver.</p>
                        </div>
                    </section>

                    <!-- Deployment Card -->
                    <section class="deployment-card" id="deploy">
                        <div class="card">
                            <div class="card-header">
                                <h2>Project Selection</h2>
                                <p>Select your Git repository to begin deployment</p>
                            </div>
                            <div class="card-content">
                                <div class="form-group">
                                    <label for="folder-path">Project Folder:</label>
                                    <div class="folder-input">
                                        <div class="input-container">
                                            <input type="text" id="folder-path" name="folder-path" placeholder="Select your git repository folder..." autocomplete="on">
                                            <div id="history-dropdown" class="history-dropdown"></div>
                                        </div>
                                        <button type="button" id="browse-btn" class="btn-secondary">Browse</button>
                                    </div>
                                    <div id="manual-input-note" class="manual-input-note" style="display: none;">
                                        You can also manually type or paste the folder path above.
                                    </div>
                                </div>

                                <button id="deploy-btn" class="btn-primary" disabled>Deploy Changes</button>

                                <div id="status-message" class="status-message" style="display: none;"></div>
                            </div>
                        </div>
                    </section>

                    <!-- Progress Section -->
                    <section class="progress-section" id="progress">
                        <!-- Progress Overview with inline progress bar -->
                        <div id="deployment-section" class="progress-overview-card" style="display: none;">
                            <div class="card">
                                <div class="card-header">
                                    <h3>Stage Progress</h3>
                                    <div class="deployment-controls">
                                        <button id="toggle-output-btn" class="btn-secondary">Show Output</button>
                                        <button id="save-output-btn" class="btn-secondary" disabled>Save Output</button>
                                    </div>
                                </div>
                                <div class="card-content">
                                    <div id="progress-bar-section" class="inline-progress" style="display: none;">
                                        <div class="progress-info">
                                            <span id="progress-text">Initializing deployment...</span>
                                            <span id="progress-percentage">0%</span>
                                        </div>
                                        <div class="progress-bar-track">
                                            <div id="progress-bar-fill" class="progress-bar-fill"></div>
                                        </div>
                                    </div>
                                    <div id="progress-overview" class="progress-overview"></div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Output Section -->
                    <section class="output-section" id="output">
                        <div id="output-window" class="output-card" style="display: none;">
                            <div class="card">
                                <div class="card-header">
                                    <h3>Script Output</h3>
                                </div>
                                <div class="card-content">
                                    <div id="output-content" class="output-content"></div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </main>
        </div>

        <!-- Scaling Page -->
        <div class="page" id="scaling-page">
            <main class="main">
                <div class="container">
                    <!-- Hero Section -->
                    <section class="hero">
                        <div class="hero-content">
                            <h1 class="hero-title">Environment Scaling</h1>
                            <p class="hero-subtitle">Scale your AWS EKS environment up via Jenkins</p>
                        </div>
                    </section>

                    <!-- Environment Scaling Card -->
                    <section class="scaling-card" id="scaling">
                        <div class="card">
                            <div class="card-header">
                                <h2>Environment Scaling</h2>
                                <p>Scale your AWS EKS environment up via Jenkins</p>
                            </div>
                            <div class="card-content">
                                <div class="form-group">
                                    <label for="cluster-selector">EKS Cluster Names:</label>
                                    <div class="multi-select-container">
                                        <div class="multi-select-input" id="cluster-selector">
                                            <div class="selected-clusters" id="selected-clusters"></div>
                                            <input type="text" id="cluster-search" placeholder="Type to search clusters..." autocomplete="off">
                                            <button type="button" id="cluster-dropdown-btn" class="dropdown-btn">
                                                <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M7 10l5 5 5-5z"/>
                                                </svg>
                                            </button>
                                        </div>
                                        <div class="multi-select-dropdown" id="cluster-dropdown" style="display: none;">
                                            <div class="dropdown-loading" id="cluster-loading" style="display: none;">
                                                <span>Loading clusters...</span>
                                            </div>
                                            <div class="dropdown-error" id="cluster-error" style="display: none;">
                                                <span>Failed to load clusters</span>
                                                <button type="button" id="cluster-retry-btn" class="retry-btn">Retry</button>
                                            </div>
                                            <div class="dropdown-list" id="cluster-list"></div>
                                        </div>
                                    </div>
                                    <small class="form-help">Select one or more EKS clusters to scale up</small>
                                </div>

                                <div class="scaling-controls">
                                    <button id="scale-up-btn" class="btn-success">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                                        </svg>
                                        Scale Up
                                    </button>
                                </div>

                                <div id="scaling-status" class="scaling-status" style="display: none;">
                                    <div class="status-content">
                                        <div class="status-indicator">
                                            <div class="status-icon"></div>
                                            <span id="scaling-status-text">Preparing to scale...</span>
                                        </div>
                                        <div id="jenkins-job-link" class="jenkins-link" style="display: none;">
                                            <a href="#" target="_blank" rel="noopener">View Jenkins Job →</a>
                                        </div>
                                    </div>
                                </div>

                                <div id="scaling-message" class="status-message" style="display: none;"></div>
                            </div>
                        </div>
                    </section>
                </div>
            </main>
        </div>

        <!-- Settings Page -->
        <div class="page" id="settings-page">
            <main class="main">
                <div class="container">
                    <!-- Hero Section -->
                    <section class="hero">
                        <div class="hero-content">
                            <h1 class="hero-title">Settings</h1>
                            <p class="hero-subtitle">Configure Jenkins credentials for environment scaling</p>
                        </div>
                    </section>

                    <!-- Settings Section -->
                    <section class="settings-card" id="settings">
                        <div class="card">
                            <div class="card-header">
                                <h2>Settings</h2>
                                <p>Configure Jenkins credentials for environment scaling</p>
                            </div>
                            <div class="card-content">
                                <div class="settings-section">
                                    <h3>Jenkins Configuration</h3>
                                    
                                    <div class="jenkins-form-row">
                                        <div class="form-group">
                                            <label for="jenkins-username">Jenkins Username:</label>
                                            <input type="text" id="jenkins-username" name="jenkins-username" placeholder="Your Jenkins username" autocomplete="username">
                                        </div>

                                        <div class="form-group">
                                            <label for="jenkins-token">Jenkins API Token:</label>
                                            <input type="password" id="jenkins-token" name="jenkins-token" placeholder="Your Jenkins API token" autocomplete="current-password">
                                            <button type="button" id="toggle-token-btn" class="toggle-password-btn" title="Show/Hide Token">
                                                <svg width="16" height="28" viewBox="0 0 24 24" fill="currentColor">
                                                    <path id="eye-icon" d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="jenkins-instructions">
                                        <h4>How to get your Jenkins API Token:</h4>
                                        <ol>
                                            <li>Go to <a href="https://jenkins-delivery.oss.corp.amdocs.aws/" target="_blank" rel="noopener">Jenkins</a> and log in</li>
                                            <li>Click your username (upper-right corner) → <strong>Security</strong></li>
                                            <li>Click <strong>Add new Token</strong> button</li>
                                            <li>Enter a descriptive name (e.g., "OCD-Token") → click <strong>Generate</strong></li>
                                            <li><strong>Important:</strong> Copy the generated token immediately and paste it above</li>
                                            <li><em>Note:</em> You cannot view the token again after this step</li>
                                        </ol>
                                        <div class="security-note">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zM11 7h2v2h-2V7zm0 4h2v6h-2v-6z"/>
                                            </svg>
                                            Your credentials are stored locally and never transmitted except to Jenkins.
                                        </div>
                                    </div>

                                    <div class="settings-actions">
                                        <button id="save-settings-btn" class="btn-primary">Save Settings</button>
                                        <button id="test-connection-btn" class="btn-secondary">Test Connection</button>
                                        <button id="clear-settings-btn" class="btn-danger-outline">Clear Credentials</button>
                                    </div>

                                    <div id="settings-status" class="settings-status" style="display: none;">
                                        <div class="status-indicator">
                                            <div class="status-icon"></div>
                                            <span id="settings-status-text">Checking connection...</span>
                                        </div>
                                    </div>

                                    <div id="settings-message" class="status-message" style="display: none;"></div>
                                </div>

                                <div class="settings-section">
                                    <h3>Bitbucket Configuration</h3>
                                    <p>Configure Bitbucket credentials for branch fetching</p>
                                    
                                    <div class="jenkins-form-row">
                                        <div class="form-group">
                                            <label for="bitbucket-username">Bitbucket Username:</label>
                                            <input type="text" id="bitbucket-username" name="bitbucket-username" placeholder="Your Bitbucket username" autocomplete="username">
                                        </div>

                                        <div class="form-group">
                                            <label for="bitbucket-token">Bitbucket HTTP Access Token:</label>
                                            <input type="password" id="bitbucket-token" name="bitbucket-token" placeholder="Your Bitbucket HTTP access token" autocomplete="current-password">
                                            <button type="button" id="toggle-bitbucket-token-btn" class="toggle-password-btn" title="Show/Hide Token">
                                                <svg width="16" height="28" viewBox="0 0 24 24" fill="currentColor">
                                                    <path id="bitbucket-eye-icon" d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="jenkins-instructions">
                                        <h4>How to get your Bitbucket HTTP Access Token:</h4>
                                        <ol>
                                            <li>Go to <a href="https://ossbucket:7990" target="_blank" rel="noopener">Bitbucket Server (ossbucket:7990)</a> and log in</li>
                                            <li>Click your profile picture → <strong>Manage account</strong></li>
                                            <li>In the left sidebar, click <strong>HTTP access tokens</strong></li>
                                            <li>Click <strong>Create a token</strong></li>
                                            <li>Enter a name (e.g., "OCD-RN-Creation") and select required permissions:
                                                <ul>
                                                    <li><strong>Repositories</strong> → <strong>Read</strong></li>
                                                    <li><strong>Projects</strong> → <strong>Read</strong> (if required)</li>
                                                </ul>
                                            </li>
                                            <li>Click <strong>Create</strong> and copy the generated token immediately</li>
                                            <li>Use your Bitbucket username and the token in the fields above</li>
                                        </ol>
                                        <div class="security-note">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zM11 7h2v2h-2V7zm0 4h2v6h-2v-6z"/>
                                            </svg>
                                            Your Bitbucket credentials are stored locally and only used to fetch branch information.
                                        </div>
                                    </div>

                                    <div class="settings-actions">
                                        <button id="save-bitbucket-settings-btn" class="btn-primary">Save Bitbucket Settings</button>
                                        <button id="test-bitbucket-connection-btn" class="btn-secondary">Test Bitbucket Connection</button>
                                        <button id="clear-bitbucket-settings-btn" class="btn-danger-outline">Clear Bitbucket Credentials</button>
                                    </div>

                                    <div id="bitbucket-settings-status" class="settings-status" style="display: none;">
                                        <div class="status-indicator">
                                            <div class="status-icon"></div>
                                            <span id="bitbucket-settings-status-text">Checking connection...</span>
                                        </div>
                                    </div>

                                    <div id="bitbucket-settings-message" class="status-message" style="display: none;"></div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </main>
        </div>

        <!-- RN Creation Page -->
        <div class="page" id="rn-creation-page">
            <main class="main">
                <div class="container">
                    <!-- Hero Section -->
                    <section class="hero">
                        <div class="hero-content">
                            <h1 class="hero-title">RN Creation</h1>
                            <p class="hero-subtitle">Release Notes creation and management</p>
                        </div>
                    </section>

                    <!-- RN Creation Card -->
                    <section class="rn-creation-card">
                        <div class="card">
                            <div class="card-header">
                                <h2>RN Creation</h2>
                                <p>Automated release notes generation</p>
                            </div>
                            <div class="card-content">
                                <div class="form-group">
                                    <label for="branch-selector">Select Branch:</label>
                                    <div class="branch-select-container">
                                        <div class="branch-select-input" id="branch-selector">
                                            <div class="selected-branch" id="selected-branch" style="display: none;"></div>
                                            <input type="text" id="branch-search" placeholder="Loading branches..." autocomplete="off" readonly>
                                            <button type="button" id="branch-dropdown-btn" class="dropdown-btn">
                                                <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M7 10l5 5 5-5z"/>
                                                </svg>
                                            </button>
                                            <button type="button" id="refresh-branches-btn" class="refresh-btn" title="Refresh Branches">
                                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                                                </svg>
                                            </button>
                                        </div>
                                        <div class="branch-select-dropdown" id="branch-dropdown" style="display: none;">
                                            <div class="dropdown-loading" id="branch-loading" style="display: none;">
                                                <span>Loading branches...</span>
                                            </div>
                                            <div class="dropdown-error" id="branch-error" style="display: none;">
                                                <span>Failed to load branches</span>
                                                <button type="button" id="branch-retry-btn" class="retry-btn">Retry</button>
                                            </div>
                                            <div class="dropdown-list" id="branch-list"></div>
                                        </div>
                                    </div>
                                    <small class="form-help">Select a branch from the customization repository</small>
                                </div>

                                <!-- Customization Job Section -->
                                <div id="customization-job-section" class="customization-job-section" style="display: none;">
                                    <div class="form-group">
                                        <label for="customization-job-url">Latest Customization Job:</label>
                                        <div class="customization-job-input">
                                            <input type="text" id="customization-job-url" placeholder="Loading latest job..." autocomplete="off">
                                            <button type="button" id="refresh-job-btn" class="refresh-btn" title="Refresh Job">
                                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                                                </svg>
                                            </button>
                                        </div>
                                        <small class="form-help">Latest successful or unstable customization build for selected branch</small>
                                    </div>

                                    <!-- Storage Job Parameters -->
                                    <div id="storage-parameters-section" class="storage-parameters-section">
                                        <h3>Storage Job Parameters</h3>
                                        
                                        <div class="jenkins-form-row">
                                            <div class="form-group">
                                                <label for="product">Product:</label>
                                                <input type="text" id="product" value="oso">
                                            </div>
                                            <div class="form-group">
                                                <label for="core-version">Core Version:</label>
                                                <select id="core-version">
                                                    <option value="">Select version...</option>
                                                    <option value="2509">2509</option>
                                                    <option value="2506">2506</option>
                                                    <option value="2503">2503</option>
                                                    <option value="2412">2412</option>
                                                    <option value="2409">2409</option>
                                                    <option value="2406">2406</option>
                                                    <option value="2403">2403</option>
                                                    <option value="2312">2312</option>
                                                    <option value="2306">2306</option>
                                                    <option value="2212">2212</option>
                                                    <option value="2309">2309</option>
                                                    <option value="2209">2209</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="jenkins-form-row">
                                            <div class="form-group">
                                                <label for="env-login">Environment Login:</label>
                                                <input type="text" id="env-login" value="aws">
                                            </div>
                                            <div class="form-group">
                                                <label for="build-chart-version">TLC Version:</label>
                                                <input type="text" id="build-chart-version" placeholder="Fetching from job..." autocomplete="off">
                                            </div>
                                        </div>

                                        <div class="jenkins-form-row">
                                            <div class="form-group">
                                                <label for="branch-name">Branch Name:</label>
                                                <input type="text" id="branch-name" placeholder="Will match selected branch" autocomplete="off">
                                            </div>
                                            <div class="form-group">
                                                <label for="layering">Layering:</label>
                                                <input type="text" id="layering" value="legacy">
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label for="custom-orch-zip-url">Custom Orchestration ZIP URL:</label>
                                            <input type="text" id="custom-orch-zip-url" placeholder="Fetching from artifacts..." autocomplete="off">
                                        </div>

                                        <div class="jenkins-form-row">
                                            <div class="form-group">
                                                <label for="oni-image">ONI Image:</label>
                                                <input type="text" id="oni-image" placeholder="Fetching from Bitbucket..." autocomplete="off">
                                            </div>
                                            <div class="form-group">
                                                <label for="email">Email:</label>
                                                <input type="email" id="email" placeholder="user@amdocs.com" autocomplete="off">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="rn-creation-controls">
                                    <button id="create-rn-btn" class="btn-primary" disabled>Trigger Storage Job</button>
                                    <button id="generate-rn-btn" class="btn-primary" style="margin-left: 10px;">Generate RN Request</button>
                                </div>

                                <div id="rn-creation-status" class="rn-creation-status" style="display: none;">
                                    <div class="status-content">
                                        <div class="status-indicator">
                                            <div class="status-icon"></div>
                                            <span id="rn-creation-status-text">Preparing...</span>
                                        </div>
                                        <div id="jenkins-rn-job-link" class="jenkins-link" style="display: none;">
                                            <a href="#" target="_blank" rel="noopener">View Jenkins Job →</a>
                                        </div>
                                    </div>
                                </div>

                                <div id="rn-creation-message" class="status-message" style="display: none;"></div>

                                <!-- RN Request Table Modal -->
                                <div id="rn-table-modal" class="rn-table-modal" style="display: none;">
                                    <div class="rn-table-content">
                                        <div class="rn-table-header">
                                            <h3>Release Notes Request Template</h3>
                                            <div class="rn-table-actions">
                                                <button id="copy-rn-table-btn" class="btn-primary">📋 Copy to Clipboard</button>
                                                <button id="download-rn-table-btn" class="btn-secondary">📁 Download</button>
                                                <button id="close-rn-table-btn" class="btn-close">✕</button>
                                            </div>
                                        </div>
                                        
                                        <div class="rn-table-container">
                                            <table id="rn-table" class="rn-table">
                                                <thead>
                                                    <tr>
                                                        <th>Application</th>
                                                        <th>Defect #</th>
                                                        <th>Core Patch/Charts</th>
                                                        <th>Custom ms/Module/VM/Orchestration Zip</th>
                                                        <th>Commit Id</th>
                                                        <th>Comments/Instructions</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="rn-table-body">
                                                    <!-- Table content will be dynamically generated here -->
                                                    <tr>
                                                        <td>NEO-OSO</td>
                                                        <td>[To be populated]</td>
                                                        <td>[To be populated]</td>
                                                        <td>[To be populated]</td>
                                                        <td>NA</td>
                                                        <td>[To be populated]</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        
                                        <div id="copy-success-message" class="copy-success-message" style="display: none;">
                                            ✅ Table copied to clipboard successfully!
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </main>
        </div>

        <!-- Automation Reports Page -->
        <div class="page" id="automation-reports-page">
            <main class="main">
                <div class="container">
                    <section class="hero">
                        <div class="hero-content">
                            <h1 class="hero-title">Automation Reports</h1>
                            <p class="hero-subtitle">Test analytics and regression analysis</p>
                        </div>
                    </section>

                    <section class="card" id="automation-overview-card">
                        <div class="card-header">
                            <h2>Build Comparison</h2>
                            <p>Select builds to compare test results and changes</p>
                        </div>
                        <div class="card-content">
                            <div class="form-layout">
                                <div class="form-group">
                                    <label for="build-select-a">Build A (baseline)</label>
                                    <select id="build-select-a"></select>
                                </div>
                                <div class="form-group">
                                    <label for="build-select-b">Build B (comparison)</label>
                                    <select id="build-select-b"></select>
                                </div>
                                <div class="form-actions">
                                    <button id="compare-builds-btn" class="btn-primary">Compare Builds</button>
                                    <button id="refresh-builds-btn" class="btn-secondary">Refresh Builds</button>
                                </div>
                            </div>

                            <div id="automation-status" class="status-message info" style="display: none;"></div>

                            <div id="automation-summary" class="summary-grid" style="display: none;">
                                <div class="summary-card" data-metric="totalTests">
                                    <h3>Total Tests</h3>
                                    <p class="value" id="summary-total-tests">0</p>
                                    <p class="delta" id="summary-total-tests-delta"></p>
                                </div>
                                <div class="summary-card" data-metric="passRate">
                                    <h3>Pass Rate</h3>
                                    <p class="value" id="summary-pass-rate">0%</p>
                                    <p class="delta" id="summary-pass-rate-delta"></p>
                                </div>
                                <div class="summary-card" data-metric="avgDuration">
                                    <h3>Avg Duration</h3>
                                    <p class="value" id="summary-avg-duration">0s</p>
                                    <p class="delta" id="summary-avg-duration-delta"></p>
                                </div>
                                <div class="summary-card" data-metric="regressions">
                                    <h3>Regressions</h3>
                                    <p class="value" id="summary-regressions">0</p>
                                    <p class="delta" id="summary-progressions">0 Progressions</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="card" id="automation-regressions" style="display: none;">
                        <div class="card-header">
                            <h2>Regressions</h2>
                            <p>Tests that passed in build A but failed in build B</p>
                        </div>
                        <div class="card-content">
                            <div class="table-wrapper">
                                <table class="rn-table compare-table">
                                    <thead>
                                        <tr>
                                            <th>Test</th>
                                            <th>Build A Status</th>
                                            <th>Build B Status</th>
                                            <th>Duration Δ</th>
                                            <th>Error</th>
                                        </tr>
                                    </thead>
                                    <tbody id="regressions-body">
                                        <tr><td colspan="5" class="empty">No regressions detected</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </section>

                    <section class="card" id="automation-progressions" style="display: none;">
                        <div class="card-header">
                            <h2>Progressions</h2>
                            <p>Tests that are fixed in build B</p>
                        </div>
                        <div class="card-content">
                            <div class="table-wrapper">
                                <table class="rn-table compare-table">
                                    <thead>
                                        <tr>
                                            <th>Test</th>
                                            <th>Build A Status</th>
                                            <th>Build B Status</th>
                                            <th>Failed Since</th>
                                            <th>Duration Δ</th>
                                        </tr>
                                    </thead>
                                    <tbody id="progressions-body">
                                        <tr><td colspan="5" class="empty">No progressions detected</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </section>

                    <section class="card" id="automation-change-candidates" style="display: none;">
                        <div class="card-header">
                            <h2>Change Candidates</h2>
                            <p>Commits between builds that may have impacted results</p>
                        </div>
                        <div class="card-content">
                            <div id="change-candidates-list" class="change-candidates-list"></div>
                        </div>
                    </section>

                    <section class="card" id="automation-trends" style="display: none;">
                        <div class="card-header">
                            <h2>Test Trends</h2>
                            <p>Last 10 builds quality trend</p>
                        </div>
                        <div class="card-content">
                            <div class="chart-container" style="height: 400px;">
                                <canvas id="automation-trends-chart"></canvas>
                            </div>
                        </div>
                    </section>
                </div>
            </main>
        </div>

        <!-- HF Adoption Page -->
        <div class="page" id="hf-adoption-page">
            <main class="main">
                <div class="container">
                    <!-- Hero Section -->
                    <section class="hero">
                        <div class="hero-content">
                            <h1 class="hero-title">HF Adoption</h1>
                            <p class="hero-subtitle">Parse email and preview version changes</p>
                        </div>
                    </section>

                    <section class="hf-upload-card">
                        <div class="card">
                            <div class="card-header">
                                <h2>Parse Release Email</h2>
                                <p>Drag and drop .eml or browse to upload</p>
                            </div>
                            <div class="card-content">
                                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 16px; align-items: start;">
                                    <div>
                                        <div id="hf-drop-zone" class="drop-zone">
                                            <input id="hf-file-input" type="file" accept=".eml,.msg" style="display:none">
                                            <div class="drop-zone-instructions">
                                                <p>Drop .eml/.msg file here (or Browse)</p>
                                                <button type="button" id="hf-browse-btn" class="btn-secondary">Browse</button>
                                            </div>
                                        </div>
                                        <div class="hf-actions">
                                            <button id="hf-parse-btn" class="btn-primary">Parse Email</button>
                                        </div>
                                        <div id="hf-status-message" class="status-message" style="display:none;"></div>
                                    </div>
                                    <div>
                                        <div class="card" style="background: transparent; box-shadow: none; border: none;">
                                            <div class="card-header" style="padding-top:0;">
                                                <h2>Select Branch</h2>
                                                <p>Choose customization branch to apply changes</p>
                                            </div>
                                            <div class="card-content">
                                                <div class="branch-select-container">
                                                    <div class="branch-select-input">
                                                        <input type="text" id="hf-branch-search" placeholder="Loading branches..." readonly>
                                                        <button type="button" id="hf-refresh-branches-btn" class="refresh-btn" title="Refresh Branches">
                                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
                                                        </button>
                                                    </div>
                                                    <div class="branch-select-dropdown" id="hf-branch-dropdown" style="display:none;">
                                                        <div class="dropdown-list" id="hf-branch-list"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="hf-preview-card">
                        <div class="card">
                            <div class="card-header">
                                <h2>Version Preview</h2>
                                <p>Review extracted versions before applying changes</p>
                            </div>
                            <div class="card-content">
                                <div class="table-wrapper">
                                    <table class="rn-table">
                                        <thead>
                                            <tr>
                                                <th>Artifact</th>
                                                <th>Property</th>
                                                <th>Parsed Version</th>
                                            </tr>
                                        </thead>
                                        <tbody id="hf-preview-body">
                                            <tr><td colspan="3" style="text-align:center;color:#888;">No data yet</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="hf-actions">
                                    <button id="hf-apply-btn" class="btn-primary" disabled>Apply Changes</button>
                                    <button id="hf-cancel-btn" class="btn-secondary">Cancel</button>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </main>
        </div>
    </div>

    <!-- Developer Credit -->
    <footer class="developer-credit">
        <span>Developed by Shadee Nicola</span>
        <span>•</span>
        <span id="app-version">dev</span>
        <button class="mail-btn" onclick="sendMail()" title="Contact Developer">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
            </svg>
        </button>
    </footer>

    <!-- Jenkins Setup Modal -->
    <div id="jenkins-setup-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Jenkins Setup Required</h3>
                <button id="close-modal-btn" class="close-btn" type="button">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 19 17.59 17.59 19 12 13.41 6.41 19 5 17.59 13.41 12z"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-icon">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                </div>
                <p>To use environment scaling, you need to configure your Jenkins credentials first.</p>
                <p>Don't worry - this is a one-time setup that takes just a minute!</p>
            </div>
            <div class="modal-actions">
                <button id="goto-settings-btn" class="btn-primary">Go to Settings</button>
                <button id="cancel-modal-btn" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</body>
</html>